<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<h:head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Report detail page for Java</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
</h:head>
<h:body>
	<h:form>
		<h2>PowerBI Embedded Report detail page</h2>
		<h:link outcome="/index.xhtml">back report list page.</h:link>
		<div id="divView">
			<iframe id="ifrTile" width="100%" height="400"></iframe>
		</div>
		<script>
			(function() {
				var iframe = document.getElementById('ifrTile');
				iframe.src = 'https://embedded.powerbi.com/appTokenReportEmbed?reportId=${viewDto.reportId}';
				iframe.onload = function() {
					var msgJson = {
						action : "loadReport",
						accessToken : "${viewDto.appToken}",
						height : 500,
						width : 722
					};
					var msgTxt = JSON.stringify(msgJson);
					iframe.contentWindow.postMessage(msgTxt, "*");
				};
			}());
		</script>
	</h:form>
</h:body>
</html>